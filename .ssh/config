# > Unless noted otherwise, for each parameter, the first obtained value will be used.
# -- man ssh_config

# Machine-specific private hosts (optional, ignored if doesn't exist)
Include config.local

# Local .test VMs
# (ephemeral, accessed via host-only networking)
Host *.test
  StrictHostKeyChecking no
  ForwardAgent yes

# Safe defaults for all machines
Host *
  # 1Password SSH agent
  IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
  UseKeychain yes
  AddKeysToAgent yes
  IdentityFile ~/.ssh/id_rsa

  # Connection multiplexing (reuse connections for speed. faster Ansible/Capistrano)
  ControlMaster auto
  ControlPath ~/.ssh/sockets/%r@%h:%p
  ControlPersist 10m

  # Keep connections alive
  ServerAliveInterval 60
  ServerAliveCountMax 3

  ConnectTimeout 5
