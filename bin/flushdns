#!/usr/bin/env ruby
# frozen_string_literal: true

# Flush DNS on macOS
if Gem::Platform.local.os == 'darwin'
  version = Gem::Version.new(Gem::Platform.local.version)

  if version >= Gem::Version.new(19) # macOS 10.15+
    `sudo dscacheutil -flushcache; sudo killall -HUP mDNSResponder`
    puts 'ğŸš½'
  elsif version >= Gem::Version.new(15) # macOS 10.11+
    `sudo killall -HUP mDNSResponder`
    puts 'ğŸš½'
  else
    abort 'ğŸ˜¢ No soup for you!'
  end
else
  abort 'ğŸ˜› macOS only'
end
